# OnsetDetector testing

These files were used to test the OnsetDetector.
The material here contibutes to Chapters 4 and 5 of the thesis.
The `results` directory contains all results of four OnsetDetector tests,
two at each damping factor chosen (0.0001, i.e. low damping, and 0.0005, i.e. high damping).
At each damping factor, the OnsetDetector was run both with and without the 'last-first'
condition.

The data files were the from the 
[University of Iowa musical instrument samples](http://theremin.music.uiowa.edu/MIS.html);
with the exception of the guitar samples, each file contains a single note
on a given instrument. The guitar files were manually split into notes by me.

To run many of these files yourself, you'll have to update paths to where you have
saved the Iowa samples and where you would like any output to be saved.
I've tried to update all paths to the results, but if I have missed any, 
`results/4_Apr_3` should be redirected to `results/low_damping/with_last-first`; 
`results/5_Apr_1` to `results/low_damping/without_last-first`; 
`results/6_Apr_2` to `results/high_damping/with_last-first`; and 
`results/6_Apr_3` to `results/high_damping/without_last-first`. 
Drop me a line if you find bugs like this.

As stated in the main readme, many of these files use `SavePlot` or `SaveLegend` objects,
available [here](https://github.com/keziah55/save_plot).

- **analyse_iowa_samples.py** does all the onset analysis of the Iowa samples. It then uses 
**do_all_onset_checking.py** to write analysis files for all the samples and by sample category,
by calling methods from **check_onsets.py**.

- **count_onsets.py** contains functions to count the total number of onsets in the 
University of Iowa musical instrument samples.

- **plot_Iowa_note.py** plots the waveform of a sample, optionally with manually
and/or automatically found onsets marked. 

- **analyse_debug_files.py** was used to debug the OnsetDetector by analysing its state
before true and false positives, using log files that were generated by the OnsetDetector.

- **make_radar_graph.py** makes the radar plots seen in the Results chapter, using **read_onset_analysis.py**.

- **analysed_files.py** checks which files appear in the found_onsets.csv file, so we can check
if any sample has been missed out.

- **report_results.py** takes results and writes them to a file containing a LaTeX table.
Uses functions from **make_report.py** and **read_onset_analysis.py**.

- **octave_analysis.py** reports the mean, median and standard deviation of results across octaves.


- **plot_band_responses.py** can be used to plot the responses of a whole band of detectors, given
a sample. Manual/automatic onsets can also be plotted.

