# DetectorBank development

These files were used in the initial development and testing of the DetectorBank
and generated the figures found in Section 2.2 of the thesis.

- **frequency_response.py** generates many of the figures in Section 2.2.1 
Frequency Response. In order to reproduce these results, several features in the 
DetectorBank source must be disabled: amplitude scaling, frequency shifting and 
sample rate limitation.

- **oscillations.py** shows the small oscillations in a repsonse, and generates 
Figures 2.4 and 2.7. Requires `peakdetect.py`, originally found 
[here](https://gist.github.com/endolith/250860#file-peakdetect-py).

- **eccentricity.py** plots the complex response at 5Hz and 400Hz, to illustrate
orbital eccentricity. Figures 2.5 and 2.6.

- **amp_scaling.py** generates Figure 2.12, which shows the decay in response amplitude
 as frequency increases. This script calculates this at two sample rates, for both
 numerical methods and both with and without frequency normalisation, and was originally
 used to generate the `scale_values.inc` file found in the DetectorBank repo.
 Obviously, this requires amplitude scaling to be disabled, along with frequency shifting.
 
- **freq_shifting.py** tests frequency shifting and makes Figure 2.14. 
Uses the FFT method, but FIRs can be selected.

- **find_f_shift.py** makes Figure 2.15, from which the point at which frequency shifting
is automatically applied is found. Again, frequency shifitng should be disabled in the 
DetectorBank source.
 
- **freqz.py** plots the frequency response curve seen in Figure 2.16. File of DetectorBank
peak responses generated by **test_system_response.py**.

- **prop_freq.py** plots responses near to the driving frequency (Figure 2.17) and prints
the data shown in Table 2.4.

- **bandwidth_lyapunov.py** can be used to verify the results given in Tables 2.5 and 2.6.
Note that this requires the sample rate restriction to be removed from the DetectorBank.
Also, the DetectorBank used here takes the first Lyapunov coefficient as a parameter, rather
than an argument; this can be implemented by changing the `AbstractDetector::getLyapunov()`
method in detectors.cpp, so that it simply returns the value given.

- **plot_lyapunov_ga.py** plots the first Lyapunov coefficient required for various bandwidth,
as shown in Figure 2.18. The data plotted here is generated by **run_lyapunov_bandwidth_ga.py**,
which uses methods defined in **lyapunov_bandwidth_amplitude_ga.py**. Once again, the DetectorBank
should take the FLC as a parameter.

- **damp_undamp.py** plots responses at different levels of damping, including undamped, as shown
in Figure 2.19.

- **test_detector_bandwidth.py** uses methods defined in **detector_bandwidth.py** to find empirical
values for the minimum detector bandwidth at various sample rates and damping factors. Figure 2.20
is plotted from data generated here.

- **get_rise_relax_time.py** finds the rise and relaxation times, given in Figure 2.21 and Tables 2.8
and 2.9.

- **prop_freq_initial_response.py** defined the functions used to create Figure 2.22 and 2.23. 
Figure 2.22a can be reproduced by calling `testSR([440], [48000])`; Fig 2.22b by 
`testSRconstantDamping([440], [48000, 96000, 192000])` (which once again required the DetectorBank 
sample rate restriction to be lifted); and Figure 2.23 can be generated by calling
`getSrDampingDiff([440], [48000])`.

- **plot_amplitude_ga_dampings.py** generates the graphs in Figure 2.24. The data plotted is generated
by **run_amplitude_ga.py**, which, like **run_lyapunov_bandwidth_ga.py**, uses the genetic algorithm
class defined in **lyapunov_bandwidth_amplitude_ga.py**. Note that the DetectorBank should again be
altered to take the FLC, instead of the bandwidth.

- **amp_in_out.py** plots the maximum output amplitude for various input amplitudes, as seen in Figure 2.25.

- **amp_norm_test.py** tests the amplitude normalisation feature and produces the graphs in Figure 2.26.






To be continued...
